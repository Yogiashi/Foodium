<div class="container"  style="margin-top: 10%;">
  <div class="row">
    <div class="col-12">
      <div class="card mt-5 container" style="width: 70rem;">
      <div class="row">
        <div class="card-body">
          <%= link_to user_path(@post.user), class: "text-decoration-none text-dark" do %>
          <%= image_tag @post.user.get_profile_image, class: "rounded-circle mr-5", size: "90x90"%>
          <strong><%= @post.user.name %></strong>
          <% end %>
          <% if @post.user.id == current_user.id %>
            <ul class="menu">
              <li class="text-center text-secondary">
                <strong>・・・</strong>
                <ul class="menuSub">
                  <% if @post.displayed %>
                  <li class=" my-1 border border-dark text-center rounded">公開中</li>
                <% else %>
                  <li class=" my-1 border border-dark text-center rounded">非公開</li>
                <% end %>
                  <li><%= link_to "編集", edit_post_path(@post), class: "btn btn-outline-success" %></li>
                  <li><%= link_to "削除", post_path(@post), class: "btn btn-outline-danger", method: :delete, data: {confirm: "本当に削除しますか？"} %></li>
                </ul>
              </li>
            </ul>
          <% end %>
        </div>
      </div>
      <div class="row">
        <div class="col-6">
          <div class="swiper">
              <div class="swiper-wrapper">
                <% @post.post_images.each do |image| %>
                  <div class="swiper-slide">
                    <div class="images mt-5", style="height: 300px"><%= image_tag image %></div>
                  </div>
                <% end %>
              </div>
              <!-- ページネーションの要素 -->
              <div class="swiper-pagination"></div>
              <!-- ナビゲーションボタン （前、次） -->
              <div class="swiper-button-prev"><i class="fas fa-chevron-circle-left"></i></div>
              <div class="swiper-button-next"><i class="fas fa-chevron-circle-right ml-3"></i></div>
            </div>
    
            <div class="d-flex border-bottom my-3">
              <!--いいねボタンajax-->
              <div id="like_btn_<%= @post.id %>" class="mr-3"><%= render "public/likes/btn", post: @post %></div>
              <%= link_to post_comments_path(@post), class: "text-decoration-none text-dark" do %>
              <i class="far fa-comment"></i>
              <span id="comment_count"><%= @post.comments.count %> コメント</span>
              <% end %>
              <!--投稿時間表示-->
              <div class="ml-auto mr-2"><%= "#{time_ago_in_words(@post.created_at)}前" %></div>
            </div>
            <div class="mb-3">
              <!--タグ-->
              <% @post_tags.each do |tag| %>
                 <i class="fas fa-tag"></i> <strong><%= link_to tag.name, search_tag_posts_path(tag_id: tag.id), class: "text-dark text-decoration-none" %></strong><%= "(#{tag.posts.count})" %>
              <% end %>
            </div>
          </div>
          <div class="col-6 mt-5">
            <div class="row p-2">
              <p class="col-3 ml-3">ショップ名</p>
               <h3 class="col-7 text-center"><%= @post.shop_name %></h3>
            </div>
            <hr>
            <div class="row mt-4 p-2">
              <p class="col-3 ml-3">料理名</p>
                <h4 class="col-7 text-center"><%= @post.dish_name %></h4>
            </div>
            <hr>
            <div class="row mt-4 p-2">
              <p class="col-3 ml-3">価格</p>
               <div class="col-7 text-center"><%= @post.price %> 円</div>
            </div>
            <hr>
            <div class="row mt-4 p-2">
              <p class="col-3 ml-3">キャプション</p>
              <div class="col-7 border rounded"><%= simple_format(@post.caption) %></div>
            </div>
            <hr>
            <div class="row mt-4 p-2">
              <p class="col-3 ml-3">場所</p>
                <p class="col-7 text-center"><%= @post.address %></p>
            </div>
          </div>
          <hr>
          <!--googl map-->
          <div class='container' style="margin-top: 100px;">
            <div class='row'>
              <div class='col-12 mx-auto mb-1'>
                <div id='map'></div>
    
                <style>
                #map{
                  height: 400px;
                }
                </style>
                <script>
                function initMap(){
                  let map = new google.maps.Map(document.getElementById('map'), {
                  center: {lat: <%= @post.latitude %>, lng: <%= @post.longitude %>},
                  zoom: 17
                  });
                  marker = new google.maps.Marker({ //GoogleMapにマーカーを落とす
                                position:  {lat: <%= @post.latitude %>, lng: <%= @post.longitude %>}, //マーカーを落とす位置を決める（値はDBに入っている）
                                map: map //マーカーを落とすマップを指定
                              });
                }
                </script>
                <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_API_KEY'] %>&callback=initMap" async defer></script>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
